From e83f3798dd904aa579425c53020c67e03735138d Mon Sep 17 00:00:00 2001
From: Dirk Farin <dirk.farin@gmail.com>
Date: Tue, 5 Apr 2022 19:35:46 +0200
Subject: [PATCH] fix check for valid PPS idx (#298)

---
 libde265/slice.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libde265/slice.cc b/libde265/slice.cc
index cca4d332..aacde0ce 100644
--- a/libde265/slice.cc
+++ b/libde265/slice.cc
@@ -373,7 +373,7 @@ de265_error slice_segment_header::read(bitreader* br, decoder_context* ctx,
   }
 
   slice_pic_parameter_set_id = get_uvlc(br);
-  if (slice_pic_parameter_set_id > DE265_MAX_PPS_SETS ||
+  if (slice_pic_parameter_set_id >= DE265_MAX_PPS_SETS ||
       slice_pic_parameter_set_id == UVLC_ERROR) {
     ctx->add_warning(DE265_WARNING_NONEXISTING_PPS_REFERENCED, false);
     return DE265_OK;
-- 
2.34.1

