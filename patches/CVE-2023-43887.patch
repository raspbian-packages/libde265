commit 63b596c915977f038eafd7647d1db25488a8c133
Author: Dirk Farin <dirk.farin@gmail.com>
Date:   Fri Sep 1 21:18:48 2023 +0200

    fix #418

Index: libde265-1.0.11/libde265/decctx.cc
===================================================================
--- libde265-1.0.11.orig/libde265/decctx.cc	2023-11-21 19:05:15.995562788 +0100
+++ libde265-1.0.11/libde265/decctx.cc	2023-11-21 19:05:15.991562787 +0100
@@ -854,16 +854,17 @@
   std::shared_ptr<pic_parameter_set> new_pps = std::make_shared<pic_parameter_set>();
 
   bool success = new_pps->read(&reader,this);
+  if (!success) {
+    return DE265_WARNING_PPS_HEADER_INVALID;
+  }
 
   if (param_pps_headers_fd>=0) {
     new_pps->dump(param_pps_headers_fd);
   }
 
-  if (success) {
-    pps[ (int)new_pps->pic_parameter_set_id ] = new_pps;
-  }
+  pps[ (int)new_pps->pic_parameter_set_id ] = new_pps;
 
-  return success ? DE265_OK : DE265_WARNING_PPS_HEADER_INVALID;
+  return DE265_OK;
 }
 
 de265_error decoder_context::read_sei_NAL(bitreader& reader, bool suffix)
