From 697aa4f7c774abd6374596e6707a6f4f54265355 Mon Sep 17 00:00:00 2001
From: Dirk Farin <dirk.farin@gmail.com>
Date: Tue, 5 Apr 2022 19:27:04 +0200
Subject: [PATCH] fix MC with HDR chroma, but SDR luma (#301)

---
 libde265/motion.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libde265/motion.cc b/libde265/motion.cc
index deae2400..8bbfbde0 100644
--- a/libde265/motion.cc
+++ b/libde265/motion.cc
@@ -376,7 +376,7 @@ void generate_inter_prediction_samples(base_context* ctx,
                   refPic->get_luma_stride(), nPbW,nPbH, bit_depth_L);
         }
 
-        if (img->high_bit_depth(0)) {
+        if (img->high_bit_depth(1)) {
           mc_chroma(ctx, sps, vi->mv[l].x, vi->mv[l].y, xP,yP,
                     predSamplesC[0][l],nCS, (const uint16_t*)refPic->get_image_plane(1),
                     refPic->get_chroma_stride(), nPbW/SubWidthC,nPbH/SubHeightC, bit_depth_C);
-- 
2.34.1

